<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc1034 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1034.xml">
<!ENTITY rfc2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY rfc2136 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2136.xml">
<!ENTITY rfc2317 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2317.xml">
<!ENTITY rfc3007 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3007.xml">
]>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt"?>

<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc rfcedstyle="yes"?>
<?rfc autobreaks="yes"?>
<?rfc docmapping="yes"?>

<rfc category="std" docName="draft-spacek-dnsop-update-clarif-00"
      ipr="trust200902">
  <front>
    <title abbrev="DNS UPDATE clarifications">Clarifications to the Classless IN-ADDR.ARPA Delegation</title>

    <author fullname="Petr Spacek" initials="P." surname="Spacek">
      <organization>Red Hat, Inc.</organization>
      <address><email>pspacek@redhat.com</email></address>
    </author>

    <date month="June" year="2015" />

    <area>Operations and Management</area>

    <workgroup>Internet Engineering Task Force</workgroup>

    <abstract>
			<t>TODO:
			This document clarifies interaction among Dynamic Updates
			in the Domain Name System (DNS UPDATE), Classless IN-ADDR.ARPA delegation,
			and Secure Domain Name System (DNS) Dynamic Update.
      </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
			<t>This document clarifies interaction among Dynamic Updates
				in the Domain Name System (DNS UPDATE) <xref target="RFC2136"/>, Classless IN-ADDR.ARPA delegation <xref target="RFC2317"/>,
				and Secure Domain Name System (DNS) Dynamic Update <xref target="RFC3007"/>.</t>

			<t>It was identified that common software implementations which update
				PTR records in IN-ADDR.ARPA zones are not able to properly handle
				classless zones and fail to update PTR records.</t>

			<t><xref target="RFC2317"/> describes how to use CNAME records in IN-ADDR.ARPA DNS zones to split
				administrative control over IN-ADDR.ARPA data for classless networks. The described method is perfectly
				compatible with standard DNS resolution but DNS update requests need special handling.</t>

			<t>This clarification is applicable to parties wanting to update records
				in IN-ADDR.ARPA and other zones which may use technique described
				in <xref target="RFC2317"/>.</t>

		</section>

    <section title="Document Conventions">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref
      target="RFC2119"/>.</t>
    </section>

    <section title="Problem Description">
			<t>The common problem is that implementations often convert a IPv4
				address to DNS node name using algorithm from <xref target="RFC1034"/> section 5.2.1.4
				and use this original node name without further verification in Update Section of the Update Message.</t>

			<t>If the target zone uses <xref target="RFC2317"/> then this behavior
				results in an attempt to add or delete a record from a node which already contains
				CNAME record and the update fails.</t>

			<t>Such incorrectly constructed update request will be silently ignored
				in accordance with <xref target="RFC2136"/> section 3.4.2.2. Alternatively,
				an error will be reported	to the requestor if he added non-existence
				of CNAME record as prerequisite	to the Update Message.</t>

			<t>TODO: generalization - it does not apply only to classless zones and PTR records.</t>
		</section>

    <section title="Clarification to Requestor Behaviour">

			<t>MUST follow the whole chain of CNAME and DNAME aliases originating
			at original owner name until a terminal node of the chain is reached.</t>

		  <t>Owner name of the terminal node MUST be used in the Update and Prerequsite
			sections of Update Message instead of the original owner name.</t>

		  <t>Zone section of Update Message MUST contain name of zone containing the owner name
				of the terminal node.</t>
    </section>


    <section title="IANA Considerations">
      <t>This draft does not involve IANA Considerations.</t>
    </section>

    <section title="Security Considerations">
			<t>TODO:
			Canonicalization allows the active attacker to redirect the update
			to a node of his choice. Update authentication using TSIG or other means
			should allow clients to modify only minimal set nodes to prevent attacker
			from modifying other nodes.</t>
    </section>

  </middle>

  <back>
<?rfc rfcedstyle="no"?>
    <references title="Normative References">
      &rfc1034;
      &rfc2119;
      &rfc2136;
      &rfc2317;
      &rfc3007;
    </references>
  </back>
</rfc>

